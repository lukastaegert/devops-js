<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Own your build step—own your code</title>
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css" />
    <link rel="stylesheet" href="node_modules/codemirror/lib/codemirror.css" />
    <link rel="stylesheet" href="node_modules/reveal.js/plugin/highlight/zenburn.css" />
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <div class="white-box quote-box slide-url"></div>
        <section
          data-transition="slide"
          data-background-image="img/rollup-left.svg"
          data-background-color="#FF5023"
          data-background-position="left"
          class="center"
        >
          <h3 style="letter-spacing: 40px; margin: 0 -40px 0 0">Own your</h3>
          <h1 style="margin: 0; font-weight: bold">Build Step</h1>
          <h3 style="margin: 0 -12px 0 0; letter-spacing: 12px">—own your code</h3>
          <div class="name-box white-box">
            <div style="white-space: nowrap">Lukas Taegert-Atkinson</div>
            <img src="img/tng.svg" />
          </div>
          <aside class="notes">How to use Rollup to improve your generated JavaScript code?</aside>
        </section>

        <section
          data-transition="slide-in zoom-out"
          data-background-image="img/rollup-left.svg"
          data-background-color="#FF5023"
          data-background-position="left"
          class="center"
        >
          <div class="white-box quote-box">
            Why don't we run JavaScript like a<br />scripting language<br />any more?
          </div>
          <aside class="notes">Why are we using complex build pipelines?</aside>
        </section>

        <section data-transition="convex-in slide-out">
          <div class="left-align-box">
            <h2>Exhibit A</h2>
            <div class="section-appear first">web application load time over slow network</div>
            <div class="sub-heading section-appear first">
              <a href="https://github.com/TNG/next-generation-scrum-poker"
                >github.com/TNG/next-generation-scrum-poker</a
              >
            </div>
            <div style="display: flex; flex-direction: row; text-align: left; margin-top: 20px">
              <div>
                <div class="fragment" style="white-space: nowrap" data-fragment-index="1">
                  unbundled: 18.29s
                </div>
                <div class="fragment" data-fragment-index="2">
                  <img
                    src="img/waterfall-slow.png"
                    style="width: 200px; margin: 0; border-radius: 10px"
                  />
                </div>
              </div>
              <div style="margin: 0 20px" class="fragment appear first" data-fragment-index="1">
                <svg style="width: 300px; height: 40px">
                  <path
                    d="M5,30 h270 l-20,5 l10,-5 l10,0 l-20,-5 l10,5"
                    pathLength="100"
                    class="arrow-line fragment fragment-selfdraw"
                    data-fragment-index="1"
                  />
                </svg>
                <div>bundle code</div>
                <div>(no minification)</div>
              </div>
              <div class="fragment appear second" data-fragment-index="1">
                <div>bundled: 7.48s</div>
                <div class="fragment" data-fragment-index="2">
                  <img
                    src="img/waterfall-fast.png"
                    style="width: 300px; margin: 0; border-radius: 10px"
                  />
                </div>
              </div>
            </div>
          </div>
        </section>

        <section
          data-transition="slide-in zoom-out"
          data-background-image="img/rollup-left.svg"
          data-background-color="#FF5023"
          data-background-position="left"
          class="center"
        >
          <div class="white-box quote-box">
            Bundling avoids the<br />load → parse → discover<br />waterfall
          </div>
        </section>

        <section data-transition="convex-in slide-out">
          <div class="left-align-box" style="width: 90%">
            <h2>Exhibit B</h2>
            <div class="section-appear first">node server size and startup time</div>
            <div class="sub-heading section-appear first">
              <a href="https://www.apollographql.com/docs/apollo-server/getting-started/"
                >apollographql.com/docs/apollo-server/getting-started</a
              >
            </div>
            <terminal-page
              input-value="docker images -f 'reference=node'"
              class="fragment"
            ></terminal-page>
          </div>
        </section>

        <section
          data-transition="slide-in zoom-out"
          data-background-image="img/rollup-left.svg"
          data-background-color="#FF5023"
          data-background-position="left"
          class="center"
        >
          <div class="white-box quote-box">
            Bundling decreases <strong>size</strong> and <strong>startup time</strong><br />for
            servers, cloud functions,<br />command line tools, ….
          </div>
        </section>

        <section data-transition="convex-in slide-out">
          <div class="left-align-box">
            <h2>Why Rollup?</h2>
            <div class="section-appear first">
              No assumptions about target environment<br />
              (browser, Node, …)
            </div>
            <ul class="fragment" data-fragment-index="1">
              <li>customize via plugins</li>
              <li>six output formats (ES, CommonJS, …)</li>
            </ul>

            <div class="fragment" data-fragment-index="2">No-overhead ES module bundling</div>
            <ul class="fragment appear first" data-fragment-index="2">
              <li>ideal for libraries/intermediate files</li>
            </ul>
            <div class="fragment" data-fragment-index="3">
              Best-of-class no-setup dead-code-elimination
            </div>
          </div>
        </section>

        <section
          data-transition="zoom"
          data-background-image="img/rollup-left.svg"
          data-background-color="#FF5023"
          data-background-position="left"
          class="center"
        >
          <h3 style="letter-spacing: -0.5px; margin: 0">We own the build step, now let's</h3>
          <h1 style="margin: 0">Own the code</h1>
          <h3 class="section-appear first" style="letter-spacing: 5px; margin: 0 0 40px 0">
            —write our own plugins!
          </h3>
          <div class="white-box quote-box fragment enlarge">
            Open the slides:
            <div style="font-size: 50px">
              https://<span style="font-weight: bold">lukastaegert.github.io/devops-js</span>/#/7
            </div>
          </div>
          <aside class="notes">
            We understand
            <div>
              <ul>
                <li>why to bundle</li>
                <li>when to use Rollup</li>
              </ul>
            </div>
            The real power is the ability to customize the process.
          </aside>
        </section>

        <section data-transition="convex-in slide-out" data-show-slide-url>
          <div class="left-align-box full-width">
            <h3 style="margin-top: 60px">1. Inject information</h3>
            <rollup-page code-sample="injectInformation"></rollup-page>
          </div>
        </section>

        <section data-show-slide-url>
          <div class="left-align-box full-width">
            <h3 style="margin-top: 60px">2. Patch up files</h3>
            <rollup-page code-sample="patchFiles"></rollup-page>
          </div>
        </section>

        <section>
          <div class="left-align-box">
            <h2>Module life-cycle</h2>
            <div style="font-size: var(--code-font-size)">
              <div class="white-box section-appear first" style="width: max-content">
                <h3>Module</h3>
                <div class="key-value-table">
                  <div>id:</div>
                  <code>"/main.js"</code>
                  <div>code:</div>
                  <code>"import './foo';"</code>
                </div>
              </div>
              <svg style="width: 100px; height: 200px; position: absolute">
                <path
                  d="M10,20 v70 l-5,-20 l5,10 l0,10 l5,-20 l-5,10"
                  pathLength="100"
                  class="arrow-line fragment fragment-selfdraw"
                  data-fragment-index="1"
                />
              </svg>
              <div class="lifecycle-grid">
                <div
                  class="white-box fragment appear second column-plugina rows-plugin"
                  data-fragment-index="1"
                >
                  <h3>Plugin A</h3>
                </div>
                <div
                  class="white-box fragment appear third column-pluginb rows-plugin"
                  data-fragment-index="1"
                >
                  <h3>Plugin B</h3>
                </div>
                <div
                  class="white-box fragment appear fourth column-core rows-plugin"
                  data-fragment-index="1"
                >
                  <h3>Core</h3>
                </div>
                <div
                  class="fragment appear first column-hooks row-resolveid"
                  data-fragment-index="1"
                >
                  <h3>
                    resolveId<svg style="width: 400px; height: 60px; position: absolute">
                      <path
                        d="M10,15 h340 l-20,5 l10,-5 l10,0 l-20,-5 l10,5"
                        pathLength="100"
                        class="arrow-line fragment fragment-selfdraw"
                        data-fragment-index="2"
                        stroke="blue"
                      />
                    </svg>
                  </h3>
                  <div class="key-value-table">
                    <div>source:</div>
                    <code>"./foo"</code>
                    <div>importer:</div>
                    <code>"/main.js"</code>
                  </div>
                  <svg style="width: 100px; height: 200px; position: absolute">
                    <path
                      d="M10,5 v30 l-5,-20 l5,10 l0,10 l5,-20 l-5,10"
                      pathLength="100"
                      class="arrow-line fragment fragment-selfdraw"
                      data-fragment-index="3"
                    />
                  </svg>
                </div>
                <code
                  class="fragment appear first plugin-code row-resolveid column-pluginb"
                  data-fragment-index="2"
                  >/foo.js</code
                >
                <div class="fragment appear first column-hooks row-load" data-fragment-index="3">
                  <h3>
                    load<svg style="width: 650px; height: 60px; position: absolute">
                      <path
                        d="M10,15 h590 l-20,5 l10,-5 l10,0 l-20,-5 l10,5"
                        pathLength="100"
                        class="arrow-line fragment fragment-selfdraw"
                        data-fragment-index="4"
                      />
                    </svg>
                  </h3>
                  <div class="key-value-table">
                    <div>id:</div>
                    <code>"/foo.js"</code>
                  </div>
                  <svg style="width: 100px; height: 200px; position: absolute">
                    <path
                      d="M10,5 v30 l-5,-20 l5,10 l0,10 l5,-20 l-5,10"
                      pathLength="100"
                      class="arrow-line fragment fragment-selfdraw"
                      data-fragment-index="5"
                    />
                  </svg>
                </div>
                <code
                  class="fragment appear first plugin-code column-core row-load"
                  data-fragment-index="4"
                  >log('foo');</code
                >
                <div
                  class="fragment appear first column-hooks row-transform"
                  data-fragment-index="5"
                >
                  <h3>
                    transform<svg style="width: 400px; height: 60px; position: absolute">
                      <path
                        d="M10,15 h135 l-20,5 l10,-5 l10,0 l-20,-5 l10,5"
                        pathLength="100"
                        class="arrow-line fragment fragment-selfdraw"
                        data-fragment-index="6"
                      />
                    </svg>
                  </h3>
                  <div class="key-value-table">
                    <div>code:</div>
                    <code>"log('foo');"</code>
                    <div>id:</div>
                    <code>"/foo.js"</code>
                  </div>
                </div>
                <code
                  class="fragment appear first plugin-code column-plugina row-transform"
                  data-fragment-index="6"
                  >log('bar');<svg style="width: 400px; height: 60px; position: absolute">
                    <path
                      d="M10,15 h40 l-20,5 l10,-5 l10,0 l-20,-5 l10,5"
                      pathLength="100"
                      class="arrow-line fragment fragment-selfdraw second"
                      data-fragment-index="6"
                    /></svg
                ></code>
                <div class="plugin-code column-pluginb row-transform">
                  <code class="fragment appear third" data-fragment-index="6" style="display: block"
                    >import log<br />
                    &nbsp;from 'log';<br />
                    log('bar');</code
                  >
                  <svg
                    style="width: 700px; height: 600px; position: absolute; margin: -400px -500px"
                  >
                    <path
                      d="M510,405 v35 h-495 v-335 h30 l-20,5 l10,-5 l10,0 l-20,-5 l10,5"
                      pathLength="100"
                      class="arrow-line fragment fragment-selfdraw"
                      data-fragment-index="7"
                    />
                  </svg>
                  <div
                    class="white-box fragment appear first"
                    data-fragment-index="7"
                    style="position: absolute; left: -450px; bottom: -52px"
                  >
                    source: <code>"log"</code>, <span style="margin-left: 10px">importer:</span>
                    <code>"/foo.js"</code>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <div class="left-align-box full-width">
            <h3>3. Replace files</h3>
            <rollup-page code-sample="replaceFiles"></rollup-page>
          </div>
        </section>

        <section>
          <div class="left-align-box full-width">
            <h3>4. Add virtual modules</h3>
            <rollup-page code-sample="virtualModules"></rollup-page>
          </div>
        </section>

        <section>
          <div class="left-align-box full-width">
            <h3>5. Access output information</h3>
            <rollup-page code-sample="buildInformation"></rollup-page>
          </div>
        </section>

        <section
          data-transition="zoom"
          data-background-image="img/rollup-left.svg"
          data-background-color="#FF5023"
          data-background-position="left"
          class="center"
        >
          <h1>There is much more...</h1>
          <div class="white-box quote-box section-appear first">
            Check out the documentation:<br /><a
              href="https://rollupjs.org/guide/en/#plugin-development"
              >rollupjs.org/guide/en/#plugin-development</a
            >
          </div>
        </section>

        <section data-transition="convex-in slide-out">
          <div class="left-align-box">
            <h2>High level tooling</h2>
            <h3 class="fragment" data-fragment-index="1">Frontend dev tools powered by Rollup</h3>
            <ul class="fragment appear first" data-fragment-index="1">
              <li>
                <img
                  src="img/stencil.png"
                  style="height: 40px; vertical-align: middle; margin: -20px 6px -10px 0"
                  alt="Stencil logo"
                /><a href="https://stenciljs.com/">Stencil</a>
              </li>
              <li>
                <img
                  src="img/vite.svg"
                  style="height: 40px; vertical-align: middle; margin: -20px 14px -10px 0"
                  alt="Vite logo"
                /><a href="https://vitejs.dev/">Vite</a>
              </li>
              <li><a href="https://github.com/preactjs/wmr">WMR</a></li>
            </ul>
            <h3 class="fragment" data-fragment-index="2">Library bundlers powered by Rollup</h3>
            <ul class="fragment appear first" data-fragment-index="2">
              <li><a href="https://github.com/developit/microbundle">microbundle</a></li>
              <li>
                <img
                  src="img/tsdx.svg"
                  style="height: 40px; vertical-align: middle; margin: -20px 10px -10px 0"
                  alt="TSDX logo"
                /><a href="https://tsdx.io/">TSDX</a>
              </li>
            </ul>
          </div>
        </section>

        <section
          class="center"
          data-background-image="img/rollup-left.svg"
          data-background-color="#FF5023"
          data-background-position="left"
          data-transition="zoom"
          data-show-slide-url
        >
          <h1 style="margin: 0">Thank you</h1>
          <h2 style="margin: 0">& happy bundling!</h2>
          <div class="name-box white-box">
            <div style="white-space: nowrap">Lukas Taegert-Atkinson</div>
            <img src="img/tng.svg" />
          </div>
        </section>
      </div>
    </div>

    <script>
      // This avoids using the zoom property in Revealjs,
      // which CodeMirror does not like at all
      Object.defineProperty(navigator, 'userAgent', { value: 'pleaseignore' });
    </script>
    <script src="node_modules/reveal.js/dist/reveal.js"></script>
    <script src="node_modules/reveal.js/plugin/highlight/highlight.js"></script>
    <script src="node_modules/reveal.js/plugin/notes/notes.js"></script>
    <script src="node_modules/codemirror/lib/codemirror.js"></script>
    <script src="node_modules/codemirror/mode/javascript/javascript.js"></script>
    <script src="js/setup.js" type="module"></script>
  </body>
</html>
